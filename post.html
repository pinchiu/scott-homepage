<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reading... â€” Scott</title>
  
  <!-- å¼•ç”¨ä¸»æ¨£å¼è¡¨ -->
  <link rel="stylesheet" href="style.css">
  
  <!-- ğŸ‘‡ 1. å¼•å…¥ Markdown è§£æå™¨ (marked.js) -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <style>
    /* å–®ç¯‡æ–‡ç« å°ˆç”¨æ¨£å¼ */
    .article-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
      background: rgba(0, 0, 0, 0.7); /* æ·±è‰²åŠé€æ˜èƒŒæ™¯ï¼Œè®“é–±è®€æ›´æ¸…æ™° */
      min-height: 100vh;
      position: relative;
      z-index: 2;
    }
    
    .back-btn {
      display: inline-flex;
      align-items: center;
      color: var(--text-muted);
      text-decoration: none;
      margin-bottom: 20px;
      transition: 0.3s;
      border-bottom: 1px dotted transparent;
    }
    .back-btn:hover { 
        color: var(--accent); 
        border-bottom-color: var(--accent);
    }

    /* Markdown å…§å®¹æ¨£å¼å„ªåŒ– */
    .article-body {
      font-size: 1.1rem;
      line-height: 1.8;
      color: #e0e0e0;
    }
    
    /* æ¨™é¡Œæ¨£å¼ */
    .article-body h2 { 
        border-bottom: 1px solid #333; 
        padding-bottom: 10px; 
        margin-top: 40px; 
        margin-bottom: 20px;
        color: var(--accent); 
    }
    .article-body h3 { 
        margin-top: 30px; 
        margin-bottom: 15px;
        color: #fff; 
    }
    
    /* åˆ—è¡¨èˆ‡å¼•ç”¨ */
    .article-body ul, .article-body ol { 
        padding-left: 20px; 
        margin-bottom: 20px;
    }
    .article-body li { margin-bottom: 8px; }
    .article-body blockquote { 
        border-left: 4px solid var(--accent); 
        padding-left: 15px; 
        color: #aaa;
        background: rgba(255,255,255,0.05);
        padding: 10px 15px;
        margin: 20px 0;
    }
    
    /* é€£çµé¡è‰² */
    .article-body a {
        color: var(--accent);
        text-decoration: underline;
    }
  </style>
</head>
<body>
  <!-- èƒŒæ™¯ Matrix ç‰¹æ•ˆ -->
  <canvas id="matrix"></canvas>

  <div class="article-container">
    <a href="/blog" class="back-btn">â† Back to Blog</a>

    <!-- é€™è£¡çš„å…§å®¹æœƒç”± JS è‡ªå‹•å¡«å…¥ -->
    <div id="article-content">
        <h1 style="color: var(--accent);">Loading article...</h1>
    </div>
  </div>

  <!-- å¼•ç”¨ JS -->
  <script src="script.js"></script>
  <!-- é‡è¦ï¼šå¼•ç”¨è³‡æ–™åº« -->
  <script src="blog.js"></script>

  <script>
    // --- æ–‡ç« è¼‰å…¥é‚è¼¯ ---
    
    // 1. å¾ç¶²å€åˆ—æŠ“å–åƒæ•¸ (ä¾‹å¦‚ ?id=6)
    const urlParams = new URLSearchParams(window.location.search);
    const postId = urlParams.get('id');

    // 2. å» blog.js çš„é™£åˆ—è£¡é¢æ‰¾ ID å°æ‡‰çš„æ–‡ç« 
    // ä½¿ç”¨ loose equality (==) å› ç‚º postId å¯èƒ½æ˜¯å­—ä¸² "6" è€Œ blog.js è£¡æ˜¯æ•¸å­— 6
    const post = blogPosts.find(p => p.id == postId);

    const contentDiv = document.getElementById('article-content');

    if (post) {
        document.title = post.title + " â€” Scott"; // ä¿®æ”¹ç€è¦½å™¨åˆ†é æ¨™é¡Œ
        
        // å»ºç«‹æ¨™é¡Œå€å¡Š HTML
        let html = `
            <header style="margin-bottom:30px; border-bottom:1px solid #333; padding-bottom:20px;">
                <h1 style="font-size:2.5rem; color:#fff; line-height: 1.3;">${post.title}</h1>
                <div style="color:#888; margin-top: 10px;">
                    ğŸ“… ${post.date} &nbsp;|&nbsp; 
                    ğŸ·ï¸ ${post.tags ? post.tags.join(', ') : 'Uncategorized'}
                </div>
            </header>
            <div class="article-body" id="md-body">
        `;

        // 3. åˆ¤æ–·å…§å®¹ä¾†æº
        if (post.file) {
            // [æ–°å¼] å¦‚æœæœ‰ file è·¯å¾‘ï¼Œå°±å» fetch æª”æ¡ˆ
            html += `<p style="color:#888;">Loading content from ${post.file}...</p></div>`;
            contentDiv.innerHTML = html;

            fetch(post.file)
                .then(response => {
                    if (!response.ok) throw new Error(`ç„¡æ³•è®€å–æª”æ¡ˆ (${response.status})`);
                    return response.text();
                })
                .then(markdownText => {
                    // ä½¿ç”¨ marked.js å°‡ Markdown è½‰ç‚º HTML
                    document.getElementById('md-body').innerHTML = marked.parse(markdownText);
                })
                .catch(err => {
                    document.getElementById('md-body').innerHTML = `
                        <div style="border: 1px solid red; padding: 20px; color: red;">
                            <h3>Error loading post</h3>
                            <p>${err.message}</p>
                            <p>Please make sure the file <strong>${post.file}</strong> exists in your project folder.</p>
                        </div>`;
                });

        } else {
            // [èˆŠå¼] ç›¸å®¹èˆŠæ–‡ç«  (ç›´æ¥é¡¯ç¤º content HTML)
            html += `${post.content}</div>`;
            contentDiv.innerHTML = html;
        }
    } else {
        // 4. æ‰¾ä¸åˆ°æ–‡ç« 
        contentDiv.innerHTML = `
            <h1 style="color: #ff4444;">âŒ Article not found</h1>
            <p>The post with ID <strong>${postId}</strong> does not exist or has been removed.</p>
            <p><a href="/blog" style="color: var(--accent);">Return to Blog List</a></p>
        `;
    }
  </script>
</body>
</html>